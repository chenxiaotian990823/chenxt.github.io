<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySql数据管理 | 小陈同学</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.d98e6f98.css" as="style"><link rel="preload" href="/assets/js/app.3a2a02db.js" as="script"><link rel="preload" href="/assets/js/2.06f25813.js" as="script"><link rel="preload" href="/assets/js/38.fe536695.js" as="script"><link rel="prefetch" href="/assets/js/10.87e5c6d3.js"><link rel="prefetch" href="/assets/js/11.e0997475.js"><link rel="prefetch" href="/assets/js/12.4288f496.js"><link rel="prefetch" href="/assets/js/13.29adca7f.js"><link rel="prefetch" href="/assets/js/14.8e202fe0.js"><link rel="prefetch" href="/assets/js/15.63c28f17.js"><link rel="prefetch" href="/assets/js/16.8cc3ef7c.js"><link rel="prefetch" href="/assets/js/17.742c270e.js"><link rel="prefetch" href="/assets/js/18.80c20e04.js"><link rel="prefetch" href="/assets/js/19.2fa5c410.js"><link rel="prefetch" href="/assets/js/20.b3dacda9.js"><link rel="prefetch" href="/assets/js/21.dec87ab5.js"><link rel="prefetch" href="/assets/js/22.e7b71d6c.js"><link rel="prefetch" href="/assets/js/23.a8c07bb0.js"><link rel="prefetch" href="/assets/js/24.4195fc79.js"><link rel="prefetch" href="/assets/js/25.de66e141.js"><link rel="prefetch" href="/assets/js/26.e9ea071d.js"><link rel="prefetch" href="/assets/js/27.be8a8a41.js"><link rel="prefetch" href="/assets/js/28.c7b3c7aa.js"><link rel="prefetch" href="/assets/js/29.0657daa2.js"><link rel="prefetch" href="/assets/js/3.3bbcb358.js"><link rel="prefetch" href="/assets/js/30.86acff00.js"><link rel="prefetch" href="/assets/js/31.e0a761f1.js"><link rel="prefetch" href="/assets/js/32.d210cdc6.js"><link rel="prefetch" href="/assets/js/33.b56a10b0.js"><link rel="prefetch" href="/assets/js/34.159bb193.js"><link rel="prefetch" href="/assets/js/35.92d14737.js"><link rel="prefetch" href="/assets/js/36.13082c06.js"><link rel="prefetch" href="/assets/js/37.b6ec2c1a.js"><link rel="prefetch" href="/assets/js/39.d3b0c7c3.js"><link rel="prefetch" href="/assets/js/4.a4d0f556.js"><link rel="prefetch" href="/assets/js/40.c7df83d4.js"><link rel="prefetch" href="/assets/js/41.136f35bd.js"><link rel="prefetch" href="/assets/js/42.33cdcbad.js"><link rel="prefetch" href="/assets/js/5.a7c32ad1.js"><link rel="prefetch" href="/assets/js/6.6b2b27aa.js"><link rel="prefetch" href="/assets/js/7.8b2a4078.js"><link rel="prefetch" href="/assets/js/8.1f1ef72f.js"><link rel="prefetch" href="/assets/js/9.902005d8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d98e6f98.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/headback.jpg" alt="小陈同学" class="logo"> <span class="site-name can-hide">小陈同学</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blogs/essay/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/javaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blogs/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/blogs/es6/" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/java/" class="nav-link router-link-active">
  Java
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blogs/essay/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/javaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blogs/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/blogs/es6/" class="nav-link">
  ES6
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/java/" class="nav-link router-link-active">
  Java
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/java/dataType.html" class="sidebar-link">Java数据类型</a></li><li><a href="/blogs/java/typeConversion.html" class="sidebar-link">Java类型转换</a></li><li><a href="/blogs/java/variableAndConstant.html" class="sidebar-link">变量和常量</a></li><li><a href="/blogs/java/operator.html" class="sidebar-link">运算符</a></li><li><a href="/blogs/java/database.html" class="sidebar-link">操作数据库</a></li><li><a href="/blogs/java/mysqlDM.html" aria-current="page" class="active sidebar-link">MySql数据管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#外键-了解" class="sidebar-link">外键(了解)</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#dml语言-全部记住-背下来" class="sidebar-link">DML语言(全部记住，背下来)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#添加" class="sidebar-link">添加</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#修改" class="sidebar-link">修改</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#删除" class="sidebar-link">删除</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#dql查询数据-最重点" class="sidebar-link">DQL查询数据(最重点)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#dql" class="sidebar-link">DQL</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#指定查询字段" class="sidebar-link">指定查询字段</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#where-条件子句" class="sidebar-link">where 条件子句</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#联表查询" class="sidebar-link">联表查询</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#分页-limit-和排序-order-by" class="sidebar-link">分页 limit 和排序 order by</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#分组和过滤" class="sidebar-link">分组和过滤</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#select小结" class="sidebar-link">select小结</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#mysql函数" class="sidebar-link">MySQL函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#常用函数" class="sidebar-link">常用函数</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#聚合函数-常用" class="sidebar-link">聚合函数(常用)</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#数据库级别的md5加密-扩展" class="sidebar-link">数据库级别的MD5加密（扩展）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#事务-transaction" class="sidebar-link">事务（Transaction）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#什么是事务" class="sidebar-link">什么是事务</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#执行事务" class="sidebar-link">执行事务</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#索引" class="sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#索引的分类" class="sidebar-link">索引的分类</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#测试索引" class="sidebar-link">测试索引</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#索引原则" class="sidebar-link">索引原则</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#权限管理和备份" class="sidebar-link">权限管理和备份</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#用户管理" class="sidebar-link">用户管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#mysql备份" class="sidebar-link">MySQL备份</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#规范数据库设计" class="sidebar-link">规范数据库设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#为什么需要设计" class="sidebar-link">为什么需要设计</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#三大范式-了解" class="sidebar-link">三大范式(了解)</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#jdbc-重点" class="sidebar-link">JDBC(重点)</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/blogs/java/mysqlDM.html#数据库连接池" class="sidebar-link">数据库连接池</a></li></ul></li></ul></li><li><a href="/blogs/java/javaweb.html" class="sidebar-link">Javaweb</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql-数据管理"><a href="#mysql-数据管理" class="header-anchor">#</a> MySql 数据管理</h1> <h2 id="外键-了解"><a href="#外键-了解" class="header-anchor">#</a> 外键(了解)</h2> <div class="custom-block tip"><p class="custom-block-title">方式一: 在创建表的时候，增加约束(麻烦，复杂)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token punctuation">(</span>
    <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'学号'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'匿名'</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>pwd<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'123456'</span> <span class="token keyword">COMMENT</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'年级'</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
    <span class="token keyword">KEY</span> <span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span><span class="token punctuation">)</span>
    <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>grade<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">方式二：创建表的时候没有外键关系</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span>

<span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>FK_gradeid<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>greadeid<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>grade<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>gradeid<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

公式:  
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 约束名 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>作为外键的列<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 哪个表<span class="token punctuation">(</span>哪个字段<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>删除有外键关系的表的时候，必须要先删除引用别人的表(从表)，再删除被引用的表（主表）</p></div> <p>以上的操作都是物理外键，数据库级别的外键，不建议使用(避免数据库过多，造成困扰,这里了解即可)</p> <div class="custom-block tip"><p class="custom-block-title">最佳实践</p> <ul><li>数据库就是单纯的表，只用来存数据，只有行(数据)和列(字段)</li> <li>我们想使用多张表的数据，想使用外键，用程序实现</li></ul></div> <h2 id="dml语言-全部记住-背下来"><a href="#dml语言-全部记住-背下来" class="header-anchor">#</a> DML语言(全部记住，背下来)</h2> <div class="custom-block tip"><p class="custom-block-title">数据库意义</p> <ul><li>数据存储</li> <li>数据管理</li></ul></div> <p>DML语言: 数据操作语言</p> <ul><li>
Insert
</li> <li>
update
</li> <li>
delete
</li></ul> <h3 id="添加"><a href="#添加" class="header-anchor">#</a> 添加</h3> <div class="custom-block tip"><p class="custom-block-title">语法</p> <div class="language-SQL extra-class"><pre class="language-sql"><code>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">`</span>字段名<span class="token number">1</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>字段名<span class="token number">2</span><span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token punctuation">`</span>字段名n<span class="token punctuation">`</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'值1'</span><span class="token punctuation">,</span><span class="token string">'值2'</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token string">'值n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></div> <p>由于主键自增，我们可以省略</p> <p>一般写插入语句，我们一定要数据和字段一一对应</p> <div class="custom-block tip"><p class="custom-block-title">插入多个字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名<span class="token punctuation">(</span><span class="token punctuation">`</span>字段名<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'大一'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'大二'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">注意事项</p> <ol><li>字段与字段之间只用 英文逗号 隔开</li> <li>字段是可以省略的，但是后边的值必须一一对应，不能省略</li> <li>可以同时插入多条数据，VALUES后边的值，需要使用，隔开即可 -VALUES (''),('')</li></ol></div> <h3 id="修改"><a href="#修改" class="header-anchor">#</a> 修改</h3> <div class="custom-block tip"><p class="custom-block-title">update</p> <p>修改谁 (条件) set原来的值 = 新值;</p> <p>eg:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>指定条件
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">SET</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'狂神'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
如果没有指定条件，那会改动表中所有记录

语法
<span class="token keyword">UPDATE</span> 表名 <span class="token keyword">SET</span> colnum_name <span class="token operator">=</span> <span class="token keyword">value</span> <span class="token keyword">WHERE</span> 条件<span class="token punctuation">;</span>
</code></pre></div><p>修改多个属性,逗号隔开</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">SET</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'狂神'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>email<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'904008800@qq.com'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
</code></pre></div><p>通过多个条件来定位数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">SET</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">&quot;狂神&quot;</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'狂神'</span> <span class="token operator">AND</span> <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">4</span>

</code></pre></div></div> <p>条件: where 子句运算符  id等于某个值，大于某个值，在某个区间内...</p> <table><thead><tr><th style="text-align:center;">操作符</th> <th style="text-align:center;">含义</th> <th style="text-align:center;">范围</th> <th style="text-align:center;">结果</th></tr></thead> <tbody><tr><td style="text-align:center;">=</td> <td style="text-align:center;">等于</td> <td style="text-align:center;">5=6</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:center;">&lt;&gt;或!=</td> <td style="text-align:center;">不等于</td> <td style="text-align:center;">5&lt;&gt;6</td> <td style="text-align:center;">true</td></tr> <tr><td style="text-align:center;">&gt;</td> <td style="text-align:center;">大于</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">&lt;</td> <td style="text-align:center;">小于</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">&gt;=</td> <td style="text-align:center;">大于等于</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">&lt;=&gt;</td> <td style="text-align:center;">小于等于</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">between A and B</td> <td style="text-align:center;">在A和B区间内，包含边界</td> <td style="text-align:center;">[A,B]</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">and</td> <td style="text-align:center;">同时成立才</td> <td style="text-align:center;">5&gt;1 and 4&gt;2</td> <td style="text-align:center;">true</td></tr> <tr><td style="text-align:center;">or</td> <td style="text-align:center;">有一个成立就</td> <td style="text-align:center;">5&gt;1 or 2&gt;4</td> <td style="text-align:center;">true</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">注意事项</p> <ul><li>colnum_name 时数据库的列，带上``</li> <li>条件，筛选的条件，如果没有指定则会修改所有的列</li> <li>value,是一个具体的值,也可以是一个变量</li> <li>多个设置的属性之间，使用英文逗号隔开</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>例子:

<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">SET</span> <span class="token punctuation">`</span>birthday<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token keyword">CURRENT_TIME</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">`</span>长江<span class="token number">7</span>号<span class="token punctuation">`</span> <span class="token operator">AND</span> <span class="token punctuation">`</span>sex<span class="token punctuation">`</span><span class="token operator">=</span><span class="token string">'女'</span>
</code></pre></div></div> <h3 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h3> <blockquote><p>detete命令</p></blockquote> <p>语法: <code>delete</code> from <code>表名</code> [where 条件]</p> <div class="language-sql extra-class"><pre class="language-sql"><code>避免不写条件，会全部删除
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>TRUNCATE   清空一个数据库表,表的结构和索引约束不会变</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">TRUNCATE</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">delete 和TRUNCATE 的区别</p> <ul><li>相同点: 都能删除数据,都不会删除表结构</li> <li>
不同点：
<ul><li>TRUNCATE: 重新设置自增列，计数器会归0</li> <li>TRUNCATE: 不会影响事务</li></ul></li></ul></div> <p>了解即可: <code>DELETE删除的问题</code>，重启数据库，现象
<ul><li>INNODB 自增列会从1开始(存在内存当中，断电即失)</li> <li>MYISEM 继续从上一个自增量开始(存在文件中，不会丢失)</li></ul></p> <h2 id="dql查询数据-最重点"><a href="#dql查询数据-最重点" class="header-anchor">#</a> DQL查询数据(最重点)</h2> <h3 id="dql"><a href="#dql" class="header-anchor">#</a> DQL</h3> <p>(Data Query LANGUAGE: 数据库查询语言)</p> <ul><li>所有的查询操作都用它</li> <li>简单的查询，复杂的查询它都能做</li> <li style="color:red;">数据库中最核心的语句</li> <li>使用频率最高的语句</li></ul> <h3 id="指定查询字段"><a href="#指定查询字段" class="header-anchor">#</a> 指定查询字段</h3> <p>查询全部</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Select</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><p>查询指定字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><p>使用别名,可以给字段起别名，也可以给表起别名</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>  <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 学号 <span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 学生姓名 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s<span class="token punctuation">;</span>

</code></pre></div><p>函数 Concat( a, b)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'姓名:'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 新名字 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">语法</p> <p>select 字段... from 表;</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>有时候，列名字不是那么的见名知意，我们起别名， AS 。字段名 as 别名，表名 as 别名;</p></div> <p>去重复 distinct<br>
作用，去除select查询出来的结果中重复的数据，重复的数据只显示一条</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询一下有哪些同学参加了考试，成绩 --</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span> <span class="token comment">-- 查询全部的考试成绩</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StuedntNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span> <span class="token comment">-- 查询有哪些同学参加了考试</span>
<span class="token comment">--发现重复数据，去重</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> <span class="token punctuation">`</span>StuedntNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>
</code></pre></div><p>数据库的列(表达式)</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">--查询系统版本(函数)</span>

<span class="token keyword">select</span> <span class="token number">100</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">as</span> 计算结果<span class="token punctuation">;</span> <span class="token comment">--可以用来计算（计算表达式）</span>

<span class="token keyword">select</span> @<span class="token variable">@auto_increment_increment</span><span class="token punctuation">;</span> <span class="token comment">--查询自增的步长（变量）</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token keyword">as</span> 加<span class="token number">1</span>分后 <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span> <span class="token comment">-- 学员考试成绩 + 1 分查看</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">数据库中的表达式:</p> <ul><li>文本值</li> <li>列</li> <li>NULL</li> <li>函数</li> <li>计算表达式</li> <li>系统变量</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法： <span class="token keyword">select</span> 表达式 <span class="token keyword">from</span> 表  
</code></pre></div></div> <h3 id="where-条件子句"><a href="#where-条件子句" class="header-anchor">#</a> where 条件子句</h3> <p>作用： 检索数据中符合条件的值;</p> <div class="custom-block tip"><p class="custom-block-title">逻辑运算符</p> <p>搜索的条件由一个或者多个表达式组成! 结果一般为boolean值</p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">语法</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">add &amp;&amp;</td> <td style="text-align:center;">a and b / a &amp;&amp; b</td> <td style="text-align:center;">逻辑与,两个为真，结果为真</td></tr> <tr><td style="text-align:center;"><code>or ||</code></td> <td style="text-align:center;"><code>a or b / a || b</code></td> <td style="text-align:center;">逻辑或，其中一个为真，则结果为真</td></tr> <tr><td style="text-align:center;">Not !</td> <td style="text-align:center;">not a / !a</td> <td style="text-align:center;">逻辑非，取反</td></tr></tbody></table> <p>尽量使用英文字母</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- where --</span>
<span class="token keyword">select</span>  <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">--查询考试成绩在95 ~ 100 之间的</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token operator">&gt;=</span><span class="token number">95</span> <span class="token operator">and</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">between</span> <span class="token number">95</span> <span class="token operator">and</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">-- 除了1000号学生之外的同学的成绩</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">!=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">模糊查询: 比较运算符</p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">语法</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">IS NULL</td> <td style="text-align:center;">a is null</td> <td style="text-align:center;">如果结果 = NULL，则结果没真</td></tr> <tr><td style="text-align:center;">IS NOT NULL</td> <td style="text-align:center;">a is not null</td> <td style="text-align:center;">如果结果为not Null，则结果没真</td></tr> <tr><td style="text-align:center;">BETWEEN AND</td> <td style="text-align:center;">A BETWEEN B AND C</td> <td style="text-align:center;">若A在B和C之间，包含边界，则结果为真</td></tr> <tr><td style="text-align:center;"><span style="color:red;">Like</span></td> <td style="text-align:center;">A like B</td> <td style="text-align:center;">SQL匹配，如果A能够匹配到B，则结果为真</td></tr> <tr><td style="text-align:center;"><span style="color:red;">in</span></td> <td style="text-align:center;">a in (a1,a1...)</td> <td style="text-align:center;">假设a在a1或者a2...其中的某一个值中，则结果为真</td></tr></tbody></table></div> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-------like-------</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token operator">like</span> <span class="token string">'陈%'</span><span class="token punctuation">;</span>    <span class="token comment">--查询姓陈的同学,like结合%或者_，%代表任意个字符，_代表一个字符</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token operator">like</span> <span class="token string">'陈_'</span><span class="token punctuation">;</span> <span class="token comment">--查询姓陈 的同学，名字只有一个字的</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token operator">like</span> <span class="token string">'%陈%'</span><span class="token punctuation">;</span> <span class="token comment">--查询名字当中有啸的同学</span>

<span class="token comment">---------in(具体的一个/多个值，精确匹配)---------</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1001</span><span class="token punctuation">,</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">--查询1001，1002，1003号学员信息</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>Address<span class="token punctuation">`</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'北京通州'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">--查询北京的学生</span>

<span class="token comment">---------NULL和 not null---------</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>Address<span class="token punctuation">`</span> <span class="token operator">in</span> <span class="token boolean">NULL</span> <span class="token operator">OR</span> <span class="token punctuation">`</span>Address<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span><span class="token comment">--查询地址为空的学生, 对应Address的空代表  null 或者 ''</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>BornDate<span class="token punctuation">`</span> <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span class="token comment">--查询有出生日期的同学，不为空</span>

<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>BornDate<span class="token punctuation">`</span> <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span class="token comment">--查询没有出生日期的同学</span>

</code></pre></div><h3 id="联表查询"><a href="#联表查询" class="header-anchor">#</a> 联表查询</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>JOIN: 对比</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">--联表查询 join--</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> 相同的字段，要用表<span class="token punctuation">.</span>字段来区分一下，要不然会报错

<span class="token keyword">select</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> StudentName <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> SubjectNo <span class="token keyword">as</span> 科目编号<span class="token punctuation">,</span> StudentResult <span class="token keyword">as</span> 分数 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">where</span> s<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>StudentNo<span class="token punctuation">;</span><span class="token comment">--查询了参加了考试的同学（学号，姓名，科目编号，分数）;</span>

<span class="token comment">--right join --</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 科目编号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> 分数 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>StudentNo<span class="token punctuation">;</span>

<span class="token comment">--left join --</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 科目编号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> 分数 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>StudentNo<span class="token punctuation">;</span>

<span class="token comment">--查询缺考的同学--</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 科目编号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> 分数 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> r<span class="token punctuation">.</span>StudentNo <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">--思考题（查询参加考试的同学信息，1.学号，2.学生姓名，3.科目名称，4.科目分数）</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名<span class="token punctuation">,</span> c<span class="token punctuation">.</span>SubjectName <span class="token keyword">as</span> 科目名称<span class="token punctuation">,</span> r<span class="token punctuation">.</span>StudentResult <span class="token keyword">as</span> 分数 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">Right</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> r<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">INNER</span> <span class="token keyword">Join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> c <span class="token keyword">on</span> r<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> c<span class="token punctuation">.</span>SubjectNo<span class="token punctuation">;</span>


<span class="token comment">/*思路
    1.分析需求，分析查询的字段来自那些表，(连接查询)
    2.确定使用哪种连接查询? 7种
    3.确定交叉点(这两个表中哪个数据是相同的)
    4.判断的条件: 学生表种的StudentNo = result.StudentNo
*/</span>


<span class="token comment">/*步骤
    1.我要查询哪些数据 select ...
    2.从哪几个表中查 FROM 表 XXX join 连接的表 on 交叉条件
    3.假设存在一种多张表查询，慢慢来，先查询两张表然后再慢慢增加
*/</span>

<span class="token comment">--- from a left join b; 以a为准</span>
<span class="token comment">--- from a right join b; 以b为准</span>

</code></pre></div><p>哪7种连接查询? <a href="https://blog.csdn.net/qq_42449963/article/details/108978952" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_42449963/article/details/108978952<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th style="text-align:center;">操作</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">INNER JOIN</td> <td style="text-align:center;">如果表中至少有一个匹配，就返回匹配的值</td></tr> <tr><td style="text-align:center;">LEFT JOIN</td> <td style="text-align:center;">即使右表中没有匹配，还是会返回左表中所有的值</td></tr> <tr><td style="text-align:center;">RIGHT JOIN</td> <td style="text-align:center;">即使左表中没有匹配，还是会返回右表中所有的值</td></tr></tbody></table> <h4 id="自联接-了解"><a href="#自联接-了解" class="header-anchor">#</a> 自联接(了解)</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>自己的表和自己的表连接，核心: 一张表拆为两张一样的表即可</p></div> <p>父类</p> <table><thead><tr><th style="text-align:center;">categoryid</th> <th style="text-align:center;">categoryName</th></tr></thead> <tbody><tr><td style="text-align:center;">2</td> <td style="text-align:center;">信息技术</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">软件开发</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:center;">美术设计</td></tr> <tr><td style="text-align:center;"></td> <td style="text-align:center;"></td></tr></tbody></table> <p>子类</p> <table><thead><tr><th style="text-align:center;">pid</th> <th style="text-align:center;">categoryid</th> <th style="text-align:center;">categoryName</th></tr></thead> <tbody><tr><td style="text-align:center;">3</td> <td style="text-align:center;">4</td> <td style="text-align:center;">数据库</td></tr> <tr><td style="text-align:center;">2</td> <td style="text-align:center;">8</td> <td style="text-align:center;">办公信息</td></tr> <tr><td style="text-align:center;">3</td> <td style="text-align:center;">6</td> <td style="text-align:center;">web开发</td></tr> <tr><td style="text-align:center;">5</td> <td style="text-align:center;">7</td> <td style="text-align:center;">ps技术</td></tr></tbody></table> <p>操作： 查询父类对应的子类关系</p> <table><thead><tr><th style="text-align:center;">父类</th> <th style="text-align:center;">子类</th></tr></thead> <tbody><tr><td style="text-align:center;">信息技术</td> <td style="text-align:center;">办公信息</td></tr> <tr><td style="text-align:center;">软件开发</td> <td style="text-align:center;">数据库</td></tr> <tr><td style="text-align:center;">软件开发</td> <td style="text-align:center;">web开发</td></tr> <tr><td style="text-align:center;">美术设计</td> <td style="text-align:center;">ps技术</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">--查询父子信息,把一张表看成两个一模一样的表--</span>
<span class="token keyword">select</span> A<span class="token punctuation">.</span><span class="token punctuation">`</span>categoryName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'父栏目'</span><span class="token punctuation">,</span>B<span class="token punctuation">.</span><span class="token punctuation">`</span>categoryName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'子栏目'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>category<span class="token punctuation">`</span> <span class="token keyword">as</span> A <span class="token punctuation">,</span><span class="token punctuation">`</span>category<span class="token punctuation">`</span> <span class="token keyword">as</span> B <span class="token keyword">where</span> B<span class="token punctuation">.</span>pid <span class="token operator">=</span> A<span class="token punctuation">.</span>categoryid<span class="token punctuation">;</span>

</code></pre></div><h4 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>


<span class="token comment">--查询学员所属的年级(学号，学生的姓名，年级名称)</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>GradeName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>grade<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>GradeId<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>GradeId<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">--查询科目所属的年级（科目名称，年级名称）</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目名称'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>GradeName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'年级名称'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>grade<span class="token punctuation">`</span> <span class="token keyword">as</span> g <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>GradeId<span class="token punctuation">`</span> <span class="token operator">=</span> g<span class="token punctuation">.</span><span class="token punctuation">`</span>GradeId<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">--查询参加‘高等数学’考试的同学信息，1.学号，2.学生姓名，3.科目名称，4.科目分数</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目名称'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目分数'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">where</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 

</code></pre></div><h3 id="分页-limit-和排序-order-by"><a href="#分页-limit-和排序-order-by" class="header-anchor">#</a> 分页 limit 和排序 order by</h3> <h4 id="排序-升序-asc-降序-desc"><a href="#排序-升序-asc-降序-desc" class="header-anchor">#</a> 排序： 升序 ASC / 降序 DESC</h4> <p>语法: ORDER BY 通过哪个字段排序，怎么排</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--查询的结果按照成绩降序排序</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目名称'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目分数'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">where</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">order</span> <span class="token keyword">by</span> StudentResult <span class="token keyword">DESC</span><span class="token punctuation">;</span> 

</code></pre></div><h4 id="分页"><a href="#分页" class="header-anchor">#</a> 分页</h4> <div class="custom-block tip"><p class="custom-block-title">为什么要分页?</p> <ul><li>环节数据库压力</li> <li>给人的体验更好</li></ul></div> <p>语法: limit 起始值,页面大小<br>
网页应用： 当前页，总页数，页面大小</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- limit 0,5 查询第1-5条数据</span>
<span class="token comment">-- limit 1,5 查询2-6</span>
<span class="token comment">-- limit 6,5 </span>

<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学生姓名'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目名称'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目分数'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">where</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">order</span> <span class="token keyword">by</span> StudentResult <span class="token keyword">DESC</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span> 

<span class="token comment">-- 第一页 limit 0,5</span>
<span class="token comment">-- 第二页 limit 5,5</span>
<span class="token comment">-- 第三页 limit 10,5</span>
<span class="token comment">-- 第n页  limit (n - 1) * pageSize ,pageSize</span>
<span class="token comment">-- pageSize: 页面大小</span>
<span class="token comment">-- (n - 1) * pageSize：起始值</span>
<span class="token comment">-- n: 当前页</span>
<span class="token comment">-- 数据总数/页面大小 = 总页数</span>

</code></pre></div><h4 id="练习-2"><a href="#练习-2" class="header-anchor">#</a> 练习</h4> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 查询 高等数据 课程成绩排名前十的学生，并且分数要大于80的学生信息(学号，姓名，课程名称，课程分数)</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span><span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'课程名称'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'分数'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> r<span class="token punctuation">.</span>SubjectNo <span class="token keyword">where</span> sub<span class="token punctuation">.</span>SubjectNo <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">AND</span> r<span class="token punctuation">.</span>StudentResult <span class="token operator">&gt;=</span> <span class="token number">80</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">DESC</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h3> <p>where(值是固定的,子查询就是把这个值变成是计算出来的)<br>
本质： 在where语句中嵌套一个子查询语句</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">--1、查询 高等数学 的所有考试结果(学号，科目编号，成绩)降序排列</span>
<span class="token comment">-- 方式1，使用连接查询------</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'学号'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'科目编号'</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">as</span> <span class="token string">'成绩'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'高等数学'</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式2，使用子查询-------</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">where</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'高等数学'</span>
<span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>


<span class="token comment">-- 2、分数不小于80分的学生的学号和姓名</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> r<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">;</span>

<span class="token comment">-- 在这个基础上，增加一个科目，面向对象, 查询 面向对象课程的编号</span>
<span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">as</span> 学号<span class="token punctuation">,</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">as</span> 姓名 <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">as</span> s <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">on</span> r<span class="token punctuation">.</span>StudentNo <span class="token operator">=</span> s<span class="token punctuation">.</span>StudentNo <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">&gt;=</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'面向对象'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询课程为 面向对象 且分数不小于80分的同学的学号和姓名</span>

<span class="token comment">--自己写的</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">&gt;=</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token keyword">select</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'面向对象'</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--====</span>
<span class="token comment">-- 狂神写的</span>
<span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">in</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token operator">&gt;</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token keyword">select</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'面向对象'</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">--- 练习  查询 高等数学 的前5名同学的成绩信息(学号，姓名，分数)</span>
<span class="token keyword">SELECT</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span><span class="token punctuation">,</span>StudentName<span class="token punctuation">,</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span>
<span class="token keyword">FROM</span> result <span class="token keyword">as</span> r
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> student <span class="token keyword">as</span> s
<span class="token keyword">ON</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span> <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token punctuation">`</span>StudentNo<span class="token punctuation">`</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
   <span class="token keyword">SELECT</span> <span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">FROM</span><span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">WHERE</span> <span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span><span class="token operator">=</span><span class="token string">'高等数学'</span> 
   <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span> <span class="token keyword">DESC</span>
   <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">5</span>
<span class="token punctuation">)</span>

</code></pre></div><h3 id="分组和过滤"><a href="#分组和过滤" class="header-anchor">#</a> 分组和过滤</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询不同课程的平均分，最高分，以及最低分</span>
<span class="token keyword">select</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 平均分<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 最高分<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 最低分 <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">group</span> <span class="token keyword">by</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token comment">--通过subjectno字段来分组</span>

<span class="token comment">-- 查询不同课程的平均分，最高分，以及最低分,并且平均分大于80分</span>
<span class="token keyword">select</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectName<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 平均分<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 最高分<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 最低分 <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span> <span class="token keyword">as</span> r <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">`</span>subject<span class="token punctuation">`</span> <span class="token keyword">as</span> sub <span class="token keyword">on</span> sub<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">group</span> <span class="token keyword">by</span> r<span class="token punctuation">.</span><span class="token punctuation">`</span>SubjectNo<span class="token punctuation">`</span> <span class="token keyword">having</span> 平均分 <span class="token operator">&gt;</span> <span class="token number">80</span>
<span class="token comment">--having 就是对分组进行过滤</span>
</code></pre></div><h3 id="select小结"><a href="#select小结" class="header-anchor">#</a> select小结</h3> <p>语法:</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token keyword">select</span> 去重 要查询的字段 <span class="token keyword">from</span> 表 （注意： 表和字段可以别名）  
xxxx <span class="token keyword">join</span> 要连接的表 <span class="token keyword">on</span> 等值判断  
<span class="token keyword">where</span> <span class="token punctuation">(</span>具体的值<span class="token operator">/</span>子查询语句<span class="token punctuation">)</span>  
<span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>通过哪个字段来分组<span class="token punctuation">)</span>  
<span class="token keyword">having</span><span class="token punctuation">(</span>条件等同于<span class="token keyword">where</span>的使用<span class="token punctuation">)</span> <span class="token comment">--过滤分组后的信息  </span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token punctuation">(</span>通过那个字段排序<span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">(</span>降序<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">asc</span><span class="token punctuation">(</span>升序<span class="token punctuation">)</span>  
<span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span>pageSize

业务层面: 
查询: 跨表，跨数据库<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div><h2 id="mysql函数"><a href="#mysql函数" class="header-anchor">#</a> MySQL函数</h2> <p>官网: <a href="https://dev.mysql.com/doc/refman/5.7/en/func-op-summary-ref.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.7/en/func-op-summary-ref.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="常用函数"><a href="#常用函数" class="header-anchor">#</a> 常用函数</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 数学运算</span>
<span class="token keyword">select</span> ABS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span>  <span class="token comment">-- 绝对值</span>
<span class="token keyword">select</span> Ceiling<span class="token punctuation">(</span><span class="token number">9.4</span><span class="token punctuation">)</span> <span class="token comment">--向上取整</span>
<span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">9.4</span><span class="token punctuation">)</span> <span class="token comment">--向下取整</span>
<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">--返回一个 0~1 之间的随机数</span>
<span class="token keyword">select</span> sign<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token comment">--判断一个数的符号,负数返回-1，0返回0，正数返回1</span>

<span class="token comment">-- 字符串函数</span>
<span class="token keyword">select</span> CHAR_LENGTH<span class="token punctuation">(</span><span class="token string">&quot;字符串&quot;</span><span class="token punctuation">)</span>    <span class="token comment">-- 字符串长度</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">&quot;我&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;爱&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;中国&quot;</span><span class="token punctuation">)</span>     <span class="token comment">--拼接字符串</span>
<span class="token keyword">select</span> <span class="token keyword">INSERT</span><span class="token punctuation">(</span><span class="token string">&quot;我爱中国&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'嗯'</span><span class="token punctuation">)</span> <span class="token comment">-- 插入，替换字符串</span>
<span class="token keyword">select</span> lower<span class="token punctuation">(</span><span class="token string">&quot;cxt&quot;</span><span class="token punctuation">)</span>  <span class="token comment">--转小写</span>
<span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">&quot;CXT&quot;</span><span class="token punctuation">)</span>  <span class="token comment">--转大写</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&quot;cxt&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span> <span class="token comment">--查询第一次显示的索引</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&quot;我爱中国&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;我&quot;</span><span class="token punctuation">,</span><span class="token string">'嗯'</span><span class="token punctuation">)</span> <span class="token comment">--替换字符串</span>
<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">&quot;我爱中国&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>    <span class="token comment">--返回指定的字符串,参数： 原字符串，开始的索引，截取的长度</span>
<span class="token keyword">select</span> reverse<span class="token punctuation">(</span><span class="token string">&quot;我爱中国&quot;</span><span class="token punctuation">)</span>  <span class="token comment">--反转字符</span>

<span class="token comment">-- 查询姓周的同学，改为邹</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>StudentName<span class="token punctuation">,</span><span class="token string">'陈'</span><span class="token punctuation">,</span><span class="token string">'邹'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span> <span class="token operator">like</span> <span class="token string">&quot;陈%&quot;</span>

<span class="token comment">-- 时间和日期函数(记住)</span>
<span class="token keyword">select</span> <span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">--获取当前日期</span>
<span class="token keyword">select</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">--获取当前日期</span>
<span class="token keyword">select</span> <span class="token operator">not</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">--获取当前时间</span>
<span class="token keyword">select</span> localtime<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">--获取本地时间</span>
<span class="token keyword">select</span> sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">--获取系统时间</span>

<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的年</span>
<span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的月</span>
<span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的日</span>
<span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的时</span>
<span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的分</span>
<span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">--获取当前时间的秒</span>

<span class="token comment">-- 系统</span>
<span class="token keyword">select</span> <span class="token keyword">system_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">--获取当前系统用户,可以简写为select user()</span>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">--获取当前版本</span>

</code></pre></div><h3 id="聚合函数-常用"><a href="#聚合函数-常用" class="header-anchor">#</a> 聚合函数(常用)</h3> <table><thead><tr><th style="text-align:center;">函数名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">COUNT()</td> <td style="text-align:center;">计数</td></tr> <tr><td style="text-align:center;">SUM()</td> <td style="text-align:center;">求和</td></tr> <tr><td style="text-align:center;">AVG()</td> <td style="text-align:center;">平均</td></tr> <tr><td style="text-align:center;">MAX()</td> <td style="text-align:center;">最大值</td></tr> <tr><td style="text-align:center;">MIN()</td> <td style="text-align:center;">最小值</td></tr> <tr><td style="text-align:center;">...</td> <td style="text-align:center;">...</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 想查询表中有多少个纪律，就使用这个count</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>StudentName<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span> <span class="token comment">--count(指定列)</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>   <span class="token comment">--count(*)</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>   <span class="token comment">--count(1)</span>
以上三行有什么区别？
首先都能够统计表中的数据<span class="token punctuation">,</span>
<span class="token function">count</span><span class="token punctuation">(</span>指定列<span class="token punctuation">)</span> 会忽略 <span class="token boolean">null</span> 值
<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 不会忽略 <span class="token boolean">null</span> 值
<span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 不会忽略 <span class="token boolean">null</span> 值

第<span class="token number">2</span>、<span class="token number">3</span>行有什么区别？
<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>包括了所有列，相当于行数
<span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>包括了忽略所有列，用<span class="token number">1</span>代表代码行

执行效率上:
列名为主键，<span class="token function">count</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span>会比<span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>快
列名不为主键，<span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>会比<span class="token function">count</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span>快
如果表多个列并且没有主键，则<span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>的执行效率优于<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
如果有主键，则<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>主键<span class="token punctuation">)</span>的执行效率是最优的
如果表只有一个字段，则<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>最优

<span class="token comment">--=========--</span>

<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'总和'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'平均分'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'最高分'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentResult<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'最低分'</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>result<span class="token punctuation">`</span><span class="token punctuation">;</span>


</code></pre></div><h3 id="数据库级别的md5加密-扩展"><a href="#数据库级别的md5加密-扩展" class="header-anchor">#</a> 数据库级别的MD5加密（扩展）</h3> <div class="custom-block tip"><p class="custom-block-title">什么是MD5？</p> <p>主要增强算法复杂度和不可逆性<br>
MD5不可逆，具体的值的md5值是一样的<br>
MD5破解网站原理，背后有一个字典，MD5加密后的值 -&gt; 加密前的值</p></div> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token punctuation">(</span>
	<span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token punctuation">`</span>pwd<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8

<span class="token comment">-- 明文密码</span>
<span class="token keyword">INSERT</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>pwd<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'王五'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span>

<span class="token comment">-- 加密 id 为1的</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token keyword">set</span> pwd<span class="token operator">=</span>MD5<span class="token punctuation">(</span>pwd<span class="token punctuation">)</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 加密全部的密码</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token keyword">set</span> pwd<span class="token operator">=</span>MD5<span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入的时候加密</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'小明'</span><span class="token punctuation">,</span>MD5<span class="token punctuation">(</span><span class="token string">'990823'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">-- 如何校验 ： 将用户传递进来的密码，进行MD5加密，然后比对加密后的值</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>testmd5<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'小明'</span> <span class="token operator">and</span> <span class="token punctuation">`</span>pwd<span class="token punctuation">`</span> <span class="token operator">=</span> MD5<span class="token punctuation">(</span><span class="token string">'990823'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="事务-transaction"><a href="#事务-transaction" class="header-anchor">#</a> 事务（Transaction）</h2> <h3 id="什么是事务"><a href="#什么是事务" class="header-anchor">#</a> 什么是事务</h3> <div style="color:red;">要么都成功，要么都失败</div> <hr> <p>1、sql执行 A 给 B 转账   A有1000转200给B B有200</p> <p>2、sql执行 B 收到 A 的钱    A 有800  B 有400</p> <hr> <p>将一组sql放在一个批次中执行</p> <div class="custom-block tip"><p class="custom-block-title">事务的ACID原则</p> <ul><li>原子性(Atomicity)</li> <li>一致性(Consistency)</li> <li>隔离性(Isolation)</li> <li>持久性(Durability)</li></ul></div> <p>参考博客链接: <a href="https://blog.csdn.net/dengjili/article/details/82468576" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/dengjili/article/details/82468576<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="原子性"><a href="#原子性" class="header-anchor">#</a> 原子性</h4> <p>要么都成功，要么都失败</p> <h4 id="一致性"><a href="#一致性" class="header-anchor">#</a> 一致性</h4> <p>事务前后的数据完整性要保持一致</p> <h4 id="持久性"><a href="#持久性" class="header-anchor">#</a> 持久性</h4> <p>事务一旦提交，则不可逆，被持久化到数据库中</p> <h4 id="隔离性"><a href="#隔离性" class="header-anchor">#</a> 隔离性</h4> <p>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</p> <div class="custom-block warning"><p class="custom-block-title">隔离所导致的一些问题:</p> <ul><li>脏读: 指一个事务读取了另外一个事务未提交的数据。</li> <li>不可重复读: 在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）</li> <li>虚读(幻读): 是指在一个事务内读取到了别的事务插入的数据，导致前后读取数量总量不一致。（一般是行影响，如下图所示：多了一行）</li> <li></li></ul></div> <h3 id="执行事务"><a href="#执行事务" class="header-anchor">#</a> 执行事务</h3> <p>mysql 是默认开启事务自动提交的</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">--关闭自动提交</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">--开启自动提交</span>
</code></pre></div><p>手动处理事务  流程如下<br>
1、关闭自动提交</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">--关闭自动提交</span>
</code></pre></div><p>2、事务开启</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Start</span> <span class="token keyword">transaction</span> <span class="token comment">-- 标记一个事务的开始，从这个之后的sql都在同一个事务内</span>
</code></pre></div><p>3、</p> <p>提交: 持久化 (成功)
commit</p> <p>回滚：回到原来的样子(失败)
rollback</p> <p>4、事务结束</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">--开启自动提交</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 了解</span>
<span class="token keyword">savepoint</span> 保存点名称 <span class="token comment">--设置一个事务的保存点</span>
<span class="token keyword">rollback</span> <span class="token keyword">to</span> <span class="token keyword">savepoint</span> 保存点名称 <span class="token comment">--回滚到保存点</span>
<span class="token keyword">release</span> <span class="token keyword">savepoint</span> 保存点名称 <span class="token comment">--撤销保存点</span>
</code></pre></div><p>流程图</p> <p><img src="/images/transaction.png" alt="avatar"></p> <p>模拟场景</p> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 转账</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> shop <span class="token keyword">character</span> <span class="token keyword">set</span> utf8 <span class="token keyword">collate</span> utf8_general_ci

<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>account<span class="token punctuation">`</span><span class="token punctuation">(</span>
	<span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	<span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>account<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>money<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token number">2000.00</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token number">10000.00</span><span class="token punctuation">)</span>

<span class="token comment">-- 模拟转账: 事务</span>

<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- 关闭自动提交</span>
<span class="token keyword">Start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment">--开启一个事务(一组事务)</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>account<span class="token punctuation">`</span> <span class="token keyword">set</span> <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token operator">-</span> <span class="token number">500</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'A'</span> <span class="token comment">--A减少500</span>
<span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>account<span class="token punctuation">`</span> <span class="token keyword">set</span> <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token punctuation">`</span>money<span class="token punctuation">`</span> <span class="token operator">+</span> <span class="token number">500</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'B'</span> <span class="token comment">--B加500</span>

<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">--提交事务(成功就提交),一旦提交，就被持久化了</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span> <span class="token comment">--回滚(失败才回滚)</span>
<span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">--恢复默认值</span>


</code></pre></div><h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <p>MySQL官方对索引的定义为：索引(index)是帮助MySQL高效获取数据的数据结构。<br>
提取句子主干，就可以得到索引的本质： 索引是数据结构</p> <h3 id="索引的分类"><a href="#索引的分类" class="header-anchor">#</a> 索引的分类</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在一个表中，主键索引只能有一个，但是唯一索引可以有多个</p> <ul><li>
主键索引(PRIMARY KEY)
<ul><li>唯一的标识，主键不可重复,只能有一个列作为主键</li> <li></li></ul></li> <li>
唯一索引(UNIQUE KEY)
<ul><li>避免重复的列出现，唯一索引可以重复，多个列都可以标识为唯一索引</li></ul></li> <li>
常规索引(KEY/INDEX)
<ul><li>默认的，index/key关键字来设置</li></ul></li> <li>
全文索引(FullText)
<ul><li>在特定的数据库引擎下才有，MyISAM</li> <li>快速定位数据</li></ul></li></ul></div> <p>基础语法</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 索引的使用</span>
<span class="token comment">-- 1、在创建表的时候给字段增加索引</span>
<span class="token comment">-- 2、创建完毕后，增加索引</span>
<span class="token comment">-- 显示所有的索引信息</span>
<span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">;</span>

<span class="token comment">--增加一个索引   索引名(列名)</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">add</span> FullTEXT <span class="token keyword">index</span> <span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>StudentName<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- EXPLAIN 分析SQL执行的状况</span>
<span class="token keyword">EXPLAIN</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span>     <span class="token comment">--非全文索引</span>
<span class="token keyword">EXPLAIN</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>student<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token keyword">MATCH</span><span class="token punctuation">(</span>StudentName<span class="token punctuation">)</span> AGAINST<span class="token punctuation">(</span><span class="token string">'陈啸天'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="测试索引"><a href="#测试索引" class="header-anchor">#</a> 测试索引</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 创建一个表</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">`</span>app_user<span class="token punctuation">`</span> <span class="token punctuation">(</span>
    <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'用户昵称'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>email<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'用户邮箱'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>phone<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">comment</span> <span class="token string">'手机号'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>gender<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token keyword">default</span> <span class="token string">'0'</span> <span class="token keyword">comment</span> <span class="token string">'性别(0: 男，1： 女)'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>age<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span> <span class="token keyword">comment</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">current_timeStamp</span><span class="token punctuation">,</span>
    <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token keyword">current_timestamp</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">default</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">comment</span><span class="token operator">=</span><span class="token string">'app用户表'</span>

<span class="token comment">--插入100W条数据</span>

<span class="token keyword">DELIMITER</span> $$ <span class="token comment">-- 写函数之前必须要写这个，标志</span>

<span class="token keyword">create</span> <span class="token keyword">function</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">RETURNS</span> <span class="token keyword">int</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> num <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
    <span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> i <span class="token operator">&lt;</span> num <span class="token keyword">do</span>
        <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>app_user<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>email<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>phone<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>gender<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>password<span class="token punctuation">`</span><span class="token punctuation">,</span><span class="token punctuation">`</span>age<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span><span class="token string">'用户'</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'90400800@qq.com'</span><span class="token punctuation">,</span>CONCAT<span class="token punctuation">(</span><span class="token string">'18'</span><span class="token punctuation">,</span>FLOOR<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">999999999</span> <span class="token operator">-</span> <span class="token number">100000000</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>UUID<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">--插入语句</span>
        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> mock_data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 执行方法</span>

<span class="token comment">-- 没有索引时，执行语句</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>app_user<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'用户9999'</span><span class="token punctuation">;</span> <span class="token comment">--0.875s</span>

<span class="token comment">-- 创建一个索引,命名规则 id_表名_字段名</span>
<span class="token comment">-- 语法: create index 索引名 on 表(字段)</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> id_app_user_name <span class="token keyword">on</span> <span class="token punctuation">`</span>app_user<span class="token punctuation">`</span><span class="token punctuation">(</span><span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 创建完索引后，再执行相同语句,查询速度飞速提升</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">`</span>app_user<span class="token punctuation">`</span> <span class="token keyword">where</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'用户9999'</span><span class="token punctuation">;</span> <span class="token comment">--0.025s</span>

</code></pre></div><p>索引在小数据量的时候，用处不大，但是在大数据的时候，区别十分明显</p> <h3 id="索引原则"><a href="#索引原则" class="header-anchor">#</a> 索引原则</h3> <ul><li>索引不是越多越好</li> <li>不要对经常变动数据加索引</li> <li>小数据量的表不需要加索引</li> <li>索引一般加在常用来查询的字段上</li></ul> <p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener noreferrer">http://blog.codinglabs.org/articles/theory-of-mysql-index.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="索引的数据结构"><a href="#索引的数据结构" class="header-anchor">#</a> 索引的数据结构</h4> <p>Hash 类型的索引</p> <p>Btree: InnoDB的默认数据</p> <h2 id="权限管理和备份"><a href="#权限管理和备份" class="header-anchor">#</a> 权限管理和备份</h2> <h3 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h3> <blockquote><p>SQL命令操作
用户表: mysql.user<br>
本质: 对这张表进行增删改查</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code>
<span class="token comment">-- 创建用户 create user 用户名 identified by 密码</span>
<span class="token keyword">create</span> <span class="token keyword">USER</span> cxt IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改密码(修改当前用户密码)</span>
<span class="token keyword">set</span> password <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改密码(修改指定用户密码)</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> cxt <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">'990823'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 重命名 rename user 原名字 to 新名字</span>
<span class="token keyword">rename</span> <span class="token keyword">user</span> cxt <span class="token keyword">to</span> cxt2<span class="token punctuation">;</span>
<span class="token comment">-- 用户授权 all privileges 全部的权限， on  库.表</span>
<span class="token comment">-- all privileges 除了给别人授权的权限，其他权限都赋予</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> cxt2<span class="token punctuation">;</span>
<span class="token comment">--查看权限(指定用户)</span>
<span class="token keyword">show</span> <span class="token keyword">grant</span> <span class="token keyword">for</span> cxt2 <span class="token punctuation">;</span>

<span class="token comment">--- 查看管理员权限</span>
<span class="token keyword">show</span> <span class="token keyword">grant</span> <span class="token keyword">for</span> root<span class="token variable">@localhost</span>
<span class="token comment">--撤销权限 revoke 哪些权限，在哪个库，给谁撤销</span>
<span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> cxt2<span class="token punctuation">;</span>

<span class="token comment">-- 删除用户</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> cxt2<span class="token punctuation">;</span>

</code></pre></div><h2 id="mysql备份"><a href="#mysql备份" class="header-anchor">#</a> MySQL备份</h2> <div class="custom-block tip"><p class="custom-block-title">为什么要备份</p> <ul><li>保证重要的数据不丢失</li> <li>数据转移</li></ul></div> <div class="custom-block tip"><p class="custom-block-title">MySQL 数据库备份的方式</p> <ul><li>直接拷贝物理文件</li> <li>可视化工具,备份</li> <li>
命令行导出  
<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 公式 mysqldump -h主机 -u用户名 -p密码 数据库 表名1 表名2 表名3 &gt; 物理磁盘位置/文件名</span>
C:\Users\ponovo_cxt<span class="token operator">&gt;</span>mysqldump <span class="token operator">-</span>hlocalhost <span class="token operator">-</span>uroot <span class="token operator">-</span>p990823 school student <span class="token operator">&gt;</span>D:<span class="token operator">/</span>a<span class="token punctuation">.</span><span class="token keyword">sql</span>
mysqldump: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> <span class="token keyword">Using</span> a password <span class="token keyword">on</span> the command line interface can be insecure<span class="token punctuation">.</span>

</code></pre></div></li> <li>
命令行导入
<div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 要先登录情况下,切换到指定数据库</span>
source 物理位置<span class="token operator">/</span>文件名

</code></pre></div></li></ul></div> <p>假设你要备份数据库，防止数据丢失。<br>
把数据库给别人，直接把sql文件给了即可</p> <h2 id="规范数据库设计"><a href="#规范数据库设计" class="header-anchor">#</a> 规范数据库设计</h2> <h3 id="为什么需要设计"><a href="#为什么需要设计" class="header-anchor">#</a> 为什么需要设计</h3> <p>当数据库比较复杂的时候，我们就需要设计了</p> <h4 id="糟糕的数据库设计"><a href="#糟糕的数据库设计" class="header-anchor">#</a> 糟糕的数据库设计</h4> <ul><li>数据冗余，浪费空间</li> <li>数据库插入和删除都会麻烦、异常【屏蔽使用物理外键】</li> <li>程序的性能差</li></ul> <h4 id="良好的数据库设计"><a href="#良好的数据库设计" class="header-anchor">#</a> 良好的数据库设计:</h4> <ul><li>节省内存空间</li> <li>保证数据库的完整性</li> <li>方便我们开发系统</li></ul> <h4 id="软件开发中-关于数据库的设计"><a href="#软件开发中-关于数据库的设计" class="header-anchor">#</a> 软件开发中，关于数据库的设计</h4> <ul><li>分析需求：分析业务和需要处理的数据库的需求</li> <li>概要设计：设计关系图 E-R图</li></ul> <h4 id="设计数据库的步骤-个人博客"><a href="#设计数据库的步骤-个人博客" class="header-anchor">#</a> 设计数据库的步骤：（个人博客）</h4> <ul><li>手机信息，分析需求
    <ul><li>用户表（用户登录注销、用户个人信息，写博客，创建分类）</li> <li>分类表(文章分类，谁创建的)</li> <li>文章表(文章的信息)</li> <li>友情链接信息表</li> <li>评论表</li> <li>自定义表（系统信息，某个关键的字，或者一些主字段）</li> <li>说说（发表心情）</li></ul></li> <li>
    标识实体(把需求落地到每个字段)
</li> <li>
    标识实体之间的关系
    <ul><li>写博客：user --&gt; blog</li> <li>创建分类：user --&gt; category</li> <li>关注：user --&gt; user</li> <li>友链: links</li> <li>评论：user --&gt; user --&gt; blog</li></ul></li></ul> <h3 id="三大范式-了解"><a href="#三大范式-了解" class="header-anchor">#</a> 三大范式(了解)</h3> <p>问题：为什么需要数据规范化？</p> <ul><li>数据会重复</li> <li>更新会导致一些异常</li> <li>插入异常
    <ul><li>无法正常显示信息</li></ul></li> <li>删除异常
    <ul><li>丢失有效信息</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">三大范式: 规范数据库的设计</p> <ul><li>
    第一范式(1NF)  
    原子性：保证每一列不可再分
</li> <li>
    第二范式(2NF)  
    前提：满足第一范式  
    每张表只描述一件事情
</li> <li>
    第三范式(3NF)  
    前提：满足第一和第二范式  
    第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关
</li></ul></div> <p>规范性和性能的问题<br>
关联查询的表不得超过三张表<br> <ul><li>
考虑商业化的需求和目标，（成本，用户体验）数据库的性能更加重要
</li> <li>
在规范性能的问题的时候，需要适当的考虑一下规范性
</li> <li>
故意给某些表增加一些冗余的字段，（从多表查询中变为单表查询）
</li> <li>
故意增加一些计算列（从大数据量降低为小数据量的查询：索引）
</li></ul></p> <h3 id="jdbc-重点"><a href="#jdbc-重点" class="header-anchor">#</a> JDBC(重点)</h3> <h4 id="数据库驱动"><a href="#数据库驱动" class="header-anchor">#</a> 数据库驱动</h4> <p>程序会通过 数据库驱动，和数据库打交道
<img src="/images/JDBC.png" alt="avatar"></p> <h4 id="jdbc"><a href="#jdbc" class="header-anchor">#</a> JDBC</h4> <p>SUN公司为了简化开发人员的（对数据库的统一）操作，提供了一个(java操作数据库的)规范，俗称JDBC。这些规范的实现由具体的厂商去做。<br>
对于开发人员来水，只需要掌握JDBC接口的操作即可</p> <p>java.sql<br>
javax.sql<br>
还需要导入一个数据库驱动包 mysql-connector-java-5.1.47.jar</p> <h4 id="第一个jdbc程序"><a href="#第一个jdbc程序" class="header-anchor">#</a> 第一个JDBC程序</h4> <blockquote><p>创建测试数据库</p></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> jdbcStudy <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> UTF8 <span class="token keyword">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span>
<span class="token keyword">USE</span> jdbcStudy<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> users{
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    birthday <span class="token keyword">date</span>
}
<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token punctuation">`</span>users<span class="token punctuation">`</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>password<span class="token punctuation">,</span>email<span class="token punctuation">,</span>birthday<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">,</span><span class="token string">'zs@sina.com'</span><span class="token punctuation">,</span><span class="token string">'1980-12-04'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'lisi'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">,</span><span class="token string">'lisi@sina.com'</span><span class="token punctuation">,</span><span class="token string">'1981-12-04'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'wangwu'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">,</span><span class="token string">'wangwu@sina.com'</span><span class="token punctuation">,</span><span class="token string">'1979-12-04'</span><span class="token punctuation">)</span>
</code></pre></div><p>1、创建一个普通项目</p> <p>2、导入数据库驱动</p> <p>右键 Add as Library  或者 设置 project structer 中library</p> <p>3、编写测试代码</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcFirstDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.加载驱动</span>
            <span class="token comment">//固定写法，加载驱动</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.连接用户信息和url    ?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true  注意：sql版本大于connect版本，这个useSSL要为false</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;990823&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//3.连接成功,数据库对象,Connection 代表数据库</span>
            <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.执行sql的对象</span>
            <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5.用这个执行SQL的对象去执行sql,可能存在结果，查看返回结果</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users`&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//返回的结果集,结果集中封装了我们全部的查询出来的结果</span>
            <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;pwd=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;PASSWORD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;email=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;birth=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;birthday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token comment">//6.释放连接</span>
            resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="custom-block warning"><p class="custom-block-title">DriverManager</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">//DriverManager.registerDriver(new com.mysql.jdbc.Driver());</span>
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//connection 代表数据库</span>
<span class="token comment">// 数据库设置自动提交</span>
<span class="token comment">// 事务提交</span>
<span class="token comment">// 事务滚回</span>
connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">URL</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEndcoding=utf8&amp;useSSL=true&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// mysql --默认端口号:3306</span>
<span class="token comment">// 协议://主机地址:端口号/数据库名字?参数1&amp;参数2</span>

<span class="token comment">// oracle -- 默认端口号1521</span>
<span class="token comment">// jdbc:oracle:thin:@localhost:1521:sid</span>

</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">Statement 执行SQL的对象</p> <div class="language-java extra-class"><pre class="language-java"><code>statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//查询操作返回ResultSet</span>
statement<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//执行任何sql</span>
statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//更新，插入，删除都是用这个，返回一个受影响的行数</span>

</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">ResultSet</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users`&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//不知道列类型的情况下使用</span>
resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//如果知道列的类型，就用指定类型</span>
resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
resultSet<span class="token punctuation">.</span><span class="token function">getFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
resultSet<span class="token punctuation">.</span><span class="token function">getDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

resultSet<span class="token punctuation">.</span><span class="token function">beforeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//移动到最前边</span>
resultSet<span class="token punctuation">.</span><span class="token function">afterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">//移动到最后边</span>
resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//移动到下一个数据</span>
resultSet<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//移动到前一行</span>
resultSet<span class="token punctuation">.</span><span class="token function">absolute</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//移动到指定行</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">释放资源</p> <div class="language-java extra-class"><pre class="language-java"><code>
resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//耗资源，必须关闭</span>

</code></pre></div></div> <h4 id="statement对象"><a href="#statement对象" class="header-anchor">#</a> statement对象</h4> <p>jdbc中的statement对象用于向数据库发送sql语句，项完成对数据库的增删改查，只需要通过这个对象向数据库发送增删改查语句即可。</p> <p>Statement对象的executeUpdate方法，用于向数据库发送增删改的sql语句，executeUpdate执行完后，将会返回一个整数(即增删改语句导致了数据库几行数据发生了变化)。
Statement,executeQuery()方法用于向数据库发送查询语句，executeQuery方法返回代表查询结果的ResultSet对象</p> <p>代码实现:</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">//工具类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcFirstDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1.加载驱动</span>
            <span class="token comment">//固定写法，加载驱动</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.连接用户信息和url    协议://主机地址:端口号?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true   注意：sql版本大于connect版本，这个useSSL要为false</span>
            <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;990823&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//3.连接成功,数据库对象,Connection 代表数据库</span>
            <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>username<span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.执行sql的对象</span>
            <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5.用这个执行SQL的对象去执行sql,可能存在结果，查看返回结果</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users`&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//返回的结果集,结果集中封装了我们全部的查询出来的结果</span>
            <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;pwd=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;PASSWORD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;email=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;birth=&quot;</span> <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token string">&quot;birthday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token comment">//6.释放连接</span>
            resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>cxt<span class="token punctuation">.</span>lesson02</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>cxt<span class="token punctuation">.</span>lesson02<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JdbcUtils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span>
<span class="token comment">//插入</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInsert</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//获取数据库连接</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//获取sql执行对象</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 定义一个sql语句</span>
            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO `users` (`id`,`NAME`,`PASSWORD`,`email`,`birthday`) VALUES (5,'lianrui','990823','lianrui@sina.com','1999-08-23')&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//使用执行对象去执行这个sql语句,返回一个结果集</span>
            <span class="token keyword">int</span> r <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>r <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;插入成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//释放</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//修改</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUpdate</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;UPDATE `users` SET `PASSWORD` = '990823' WHERE id = 3&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;更新成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//释放</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//删除</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDelete</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;DELETE from `users` WHERE id = 5;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//释放</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//查询</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSelect</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users`&quot;</span><span class="token punctuation">;</span>
            rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="sql注入的问题"><a href="#sql注入的问题" class="header-anchor">#</a> SQL注入的问题</h4> <p>sql 存在漏洞，会被攻击，导致数据泄露</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>cxt<span class="token punctuation">.</span>lesson02<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JdbcUtils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author sky
 * @create 2021-12-15 16:37
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> SQL注入 <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//正常登录</span>
<span class="token comment">//        login(&quot;zhangsan&quot;,&quot;123456&quot;);</span>
        <span class="token comment">//</span>
        <span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;'or '1=1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;'or '1=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//sql注入登录，会查询到数据库所有记录</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 登录</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">String</span> pass<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users` where `NAME`='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;' AND `PASSWORD`='&quot;</span> <span class="token operator">+</span> pass <span class="token operator">+</span> <span class="token string">&quot;'&quot;</span><span class="token punctuation">;</span>
            rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="preparestatement对象"><a href="#preparestatement对象" class="header-anchor">#</a> PrepareStatement对象</h4> <p>与Statement对象相比，可以防止sql注入，并且效率更高。</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 插入</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestInsert</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//区别</span>
            <span class="token comment">//使用?占位符代替参数</span>
            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;insert into `users`(`id`,`NAME`,`PASSWORD`,`email`,`birthday`) values(?,?,?,?,?)&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//预编译sql,先写sql，然后不执行</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//手动给参数赋值</span>
            st<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;陈啸天&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;990823&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;904008800@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//执行</span>
            st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//删除</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDelete</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//定义sql</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from `users` where id = ?&quot;</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;删除成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
          <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//修改</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestUpdate</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update `users` set `NAME` = ? where `NAME` = ?&quot;</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;陈阳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;陈啸天&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;更新成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//查询</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSelect</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//建立连接</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//定义sql</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users` where id = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//预编译sql</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//插入条件数据</span>
            st<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//执行</span>
            rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;PASSWORD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token string">&quot;birthday&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//释放</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//例子： 登录</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSelect</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;陈阳&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;990823&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">String</span> pass<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//建立连接</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//定义sql</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from `users` where `NAME` = ? and `PASSWORD` = ?&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//预编译sql</span>
            <span class="token comment">//prepareStatement，防止sql注入的本质，把传递进来的参数当作字符</span>
            <span class="token comment">//假设其中存在转义字符，就会直接转义</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//插入条件数据</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>pass<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//执行</span>
            rs <span class="token operator">=</span> st<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token string">&quot;登陆成功&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                result <span class="token operator">=</span>  <span class="token string">&quot;查询不到用户&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result <span class="token operator">=</span> <span class="token string">&quot;错误&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token comment">//释放</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h3> <p>要么都成功，要么都失败</p> <div class="custom-block tip"><p class="custom-block-title">ACID原则</p> <p>原子性：要么都完成，要么都不完成</p> <p>一致性：总数不变</p> <p>隔离性：多个进程互不干扰</p> <p>持久性：一旦提交，不可逆转，持久化到数据库了</p></div> <p>隔离性的问题：</p> <p>脏读：一个事务读取了另一个没有提交的事务<br>
不可重复读： 在同一个事务内，重复读取表中的数据，表数据发生了改变<br>
虚读（幻读）：在一个事务内，读取到了别人插入的数据，导致前后读出来的结果不一致</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Transaction</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> st <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            conn <span class="token operator">=</span> <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//关闭数据库的自动提交,自动会开启事务</span>
            conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//业务</span>


            <span class="token class-name">String</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;update `account` set `money` = `money` - 100 where `NAME` = 'A'&quot;</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql1<span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//报错测试，有一个报错，肯定回滚</span>
            <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">&quot;update `account` set `money` = `money` + 100 where `NAME` = 'B'&quot;</span><span class="token punctuation">;</span>
            st <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
            st<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//业务完毕，提交事务</span>
            conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;操作成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">//如果失败，就回滚事务</span>
                <span class="token comment">//如果不主动写回滚，则默认会回滚</span>
                conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JdbcUtils</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span>conn<span class="token punctuation">,</span>st<span class="token punctuation">,</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="数据库连接池"><a href="#数据库连接池" class="header-anchor">#</a> 数据库连接池</h3> <p>数据库连接--执行完毕--释放，从连接--释放十分浪费系统资源</p> <p>池化技术： 准备一些预先的资源，过来就连接预先准备好的</p> <p>常用连接数： 比如10个</p> <p>最小连接数： 为常用连接数</p> <p>最大连接数：比如100，业务最高承载上限</p> <p>等待超时： 100ms</p> <p>编写连接池，实现一个接口，DataSource</p> <blockquote><p>开源数据源实现</p></blockquote> <p>DBCP<br>
C3P0<br>
Druid: 阿里巴巴</p> <p>使用了这些数据库连接池以后，我们在项目开发中就不需要编写连接数据库的代码了</p> <div class="custom-block tip"><p class="custom-block-title">DBCP</p> <p>需要用到的jar包：</p> <p>commonts-dbcp-1.4.jar<br>
commons-pool-1.5.4.jar</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">//dbcp做一个控制类</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbaUtils_DBCP</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token class-name">JdbaUtils_DBCP</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;dbcpconfig.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//创建数据源  工厂模式 --&gt; 创建对象</span>
            dataSource <span class="token operator">=</span> <span class="token class-name">BasicDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token comment">//从数据源中获取连接</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 释放连接资源
     * @param conn
     * @param st
     * @param rs
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">release</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">,</span> <span class="token class-name">Statement</span> st<span class="token punctuation">,</span> <span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>st <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                st<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">C3P0</p> <p>需要用到的jar包<br>
C3P0-0.9.5.5<br>
mchange-commons-java-0.2.19</p> <div class="language-xml extra-class"><pre class="language-xml"><code>
//c3p0配置文件 cp30-config.xml
<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
    C3P0的缺省(默认)配置
    如果在代码中&quot;ComboPooledDataSource ds = new ComboPooledDataSource();&quot;这样写就标识使用的时C3P0的缺省（默认）
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default-config</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>990823<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default-config</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--
       C3P0的命名配置，
       如果在代码中&quot;ComboPooledDataSource ds = new ComboPooledDataSource(&quot;MySQL&quot;);&quot;这样的写法，标识使用的时name是MySQL
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MySQL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>990823<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>acquireIncrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">结论</p> <p>无论使用什么数据源，本质都是一样的,DataSource接口不会变,方法就不会变</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blogs/java/database.html" class="prev">
        操作数据库
      </a></span> <span class="next"><a href="/blogs/java/javaweb.html">
        Javaweb
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3a2a02db.js" defer></script><script src="/assets/js/2.06f25813.js" defer></script><script src="/assets/js/38.fe536695.js" defer></script>
  </body>
</html>
